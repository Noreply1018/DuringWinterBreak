# 1-GDAL介绍


---

## 幻灯片 1

指导老师：湖北工业大学 常学立

GDAL基础介绍


---

## 幻灯片 2

开篇前言


---

## 幻灯片 3

遥感（remote sensing）是指非接触的，远距离的探测技术。一般指运用传感器/遥感器对物体的电磁波的辐射、反射特性的探测。遥感是通过遥感器这类对电磁波敏感的仪器，在远离目标和非接触目标物体条件下探测目标地物。

获取其反射、辐射或散射的电磁波信息（如电场、磁场、电磁波、地震波等信息），并进行提取、判定、加工处理、分析与应用的一门科学和技术。

什么是遥感


---

## 幻灯片 4

什么是遥感图像

用计算机处理的遥感图像必须是数字图像。以摄影方式获取的模拟图像必须用图像扫描仪等进行模/数(A/D)转换；以扫描方式获取的数字数据必须转存到一般数字计算机都可以读出的CCT等通用载体上。计算机图像处理要在图像处理系统中进行。图像处理系统是由硬件(计算机、显示器、数字化仪、磁带机等等)和软件(具有数据输入，输出，校正，变换，分类等功能)构成。图像处理内容主要包括校正、变换和分类


---

## 幻灯片 5

遥感图像与普通图像的区别

遥感图片是需要区分波段的，VNIR（可见光到近红外），SWIR（短波红外），MIR（中波红外），LIR（长波红外）在不同波段下，光的性质会有不同，材料对光的反应也会不一样。

茫茫世界光靠可见光的颜色我们人是分不出来不同物质的。同样是绿色，气球和森林，光凭肉眼如何区分，再加上从万里高空看下来，甚至连气球都看不见了。于是我们需要借助不同波段下，物质对光的反应来区别它们。因此遥感的图片是一个三维的data，既两维的空间和一维的波段。而且这些图片基本都是采用灰度图片


---

## 幻灯片 6

目录

Content


---

## 幻灯片 7

Part 1

GIS介绍


---

## 幻灯片 8

地理信息系统（GIS, geographic information system ）是用于收集，管理和分析数据的框架。GIS扎根于地理科学，它集成了许多类型的数据。它分析空间位置，并使用地图和3D场景将信息层组织到可视化中。凭借这种独特的功能，GIS可以揭示对数据的更深刻见解，例如模式，关系和情况-帮助用户做出更明智的决策。

GIS介绍


---

## 幻灯片 9

GIS介绍

数字数据 – –您将使用计算机硬件和软件查看和分析的地理信息。

计算机硬件 –用于存储数据，显示图形和处理数据的计算机。

GIS包括：

计算机软件 -在计算机硬件上运行并允许您处理数字数据的计算机程序。 构成GIS一部分的软件程序称为GIS应用程序。


---

## 幻灯片 10

地理信息系统用于多种技术，过程，技术和方法。它们被附加到与以下各项有关的各种操作和众多应用程序中：工程，计划，管理，运输/物流，保险，电信和业务。因此，GIS和位置智能应用程序是基于地理位置的服务的基础，这些服务依赖于地理分析和可视化。

GIS介绍


---

## 幻灯片 11

GIS通过将位置用作“关键索引变量”来提供关联以前不相关的信息的功能。在地球时空中发现的位置和范围，可以通过发生的日期和时间以及x，y和z坐标进行记录；代表经度（x），纬度（y）和高程（z）。所有基于地球的，时空，位置和范围参考，都应相互关联，并最终与“真实”物理位置或范围相关。GIS的这一关键特性已经开始为科学探究和研究开辟新的途径。

GIS介绍


---

## 幻灯片 12

地图

地图是您要使用的数据层和分析的地理容器。GIS地图可以轻松共享并嵌入到应用程序中几乎任何地方的每个人都可以访问。

数据

GIS使用空间位置集成了许多不同种类的数据层。大多数数据具有地理成分。GIS数据包括链接到电子表格和表格的图像，要素和底图。

分析

空间分析使您能够评估适用性和能力，估计和预测，解释和理解等等，从而为您的洞察力和决策提供新的视角。

GIS如何运作

GIS技术将地理科学与工具用于理解和协作。它可以帮助人们达成一个共同的目标：从所有类型的数据中获得可行的情报。

应用

应用程序提供了集中的用户体验，以使工作完成并使每个人都可以使用GIS。GIS应用程序几乎可以在任何地方使用：在您的手机，平板电脑，Web浏览器和台式机上。


---

## 幻灯片 13

发展历史

1967年， 世界上第一个真正投入应用的地理信息系统由联邦林业和农村发展部在加拿大安大略省的渥太华研发。 罗杰·汤姆林森博士开发的这个系统被称为加拿大地理信息系统（CGIS ） ， 主要用于存储， 分析和利用加拿大土地统计局 收集的数据， 并增设了等级分类因素来进行分析。

由于CGIS设计并实现了现代GIS技术的一些基本功能， 汤姆林森被称为“地理信息系统之父”， 尤其是因为他促进了地理数据的空间分析中对于图层这一概念与技术的应用。

20世纪60年代早期， 在核武器研究的推动下， 计算机硬件的发展推动了通用计算机“绘图”的应用。

微型计算机硬件的发展使得象 ESRI 和 CARIS 那样的供应商成功地 兼并了大多数的 CGIS 特征， 并结合了对空间和属性信息的分离的第一种世代方法与对组织的属性数据 的第二种世代方法入数据库结构。

20世纪80年代和90年代产业成长刺激了应用了 GIS 的 UNIX 工作站和个人计算机飞速增长。 至20世纪末， 在各种系统中迅速增长使得其在相关的少量平台已经得到了巩固和规范。 并且用户开始提出了在互联网上查看 GIS 数据的概念， 这要求数据的格式和传输标准化。


---

## 幻灯片 14

随着云计算、物联网、移动终端等新技术的快速发展，未来的GIS将会是普适化的GIS，用户日益多样的需求将能够得以轻松解决。

未来的GIS将会是普适化的GIS，任何人都可以用，在任何的地方，通过任何的终端都可以访问GIS服务，而且不局限在专业的终端上， 让普通用户都可以通过多媒介进行访问。 这也得益于云计算技术、移动终端等方面的快速发展，让用户的更多需求都能够非常轻松的实现。

发展空间


---

## 幻灯片 15

GDAL介绍

Part 2


---

## 幻灯片 16

GDAL介绍

Geospatial Data Abstraction Library （GDAL）是使用C/C++语言编写的用于读写空间数据的一套跨平台开源库。

作为一个库，它为调用的应用程序提供了所有受支持格式的单个栅格抽象数据模型和单个矢量抽象数据模型。 它还带有用于数据转换和处理的各种有用的命令行实用程序。


---

## 幻灯片 17

GDAL库起源

很多著名的 GIS 类产品都使用了 GDAL/OGR 库，包括 ESRI 的 ArcGIS 系列、 Erdas2011、 Google Earth 和跨平台的 GRASS GIS、 Quantunm GIS 系统等。

GDAL 最初是由 Frank Warmerdam 于 1998 年开始开发的， 在 GDALI.3.2 版本之后， 正式由开源空间信息基金会 (OpenSourceGeospatialFoundation, 简称 OSGeo) 下的 GDAL/OGR项目管理委员会对其进行维护。


---

## 幻灯片 18

GDAL 提供对多种栅格数据的支持， 包括 Arc/Info ASCII Grid(asc), GeoTiff(tiff), Erdas Imagine Images(img), ASCII DEM(dem) 等格式。

.

GDAL特点

GDAL主要提供了三大类数据的支持：栅格数据、矢量数据以及空间网络数据

GDAL库还提供了一系列算法接口，比如矢量栅格化、栅格矢量化、图像校正算法以及DEM相关的算法接口等；同时对这些算法提供了一系列可以运行的程序或者脚本，方便人们使用 .


---

## 幻灯片 19

什么是栅格数据和矢量数据？

栅格结构：以规则的阵列来表示空间地物或现象分布的数据组织，数据表示非几何属性特征。

优点：数据结构简单，便于空间分析和地表模拟

缺点：数据量大，投影转换比较复杂。

矢量数据：通过记录坐标的方式尽可能精确地表示点、线和多边形等地理实体，坐标空间设为连续，允许任意位置、长度和面积的精确定义。

优点：数据结构紧凑、冗余度低，有利于网络和检索分析，图形显示质量好、精度高；缺点：数据结构复杂，多边形叠加分析比较困难。


---

## 幻灯片 20

什么是栅格数据和矢量数据？

总的来说：栅格数据操作容易实现，矢量数据操作则比较复杂；栅格结构是矢量结构在某种程度上的一种近似；

在坐标位置搜索、计算多边形形状面积等方面栅格结构更为有效，而且易于遥感相结合，易于信息共享；

矢量结构对于拓扑关系的搜索则更为高效，网络信息只有用矢量才能完全描述，而且精度较高。


---

## 幻灯片 21

GDAL支持的数据格式（部分）



| Raster data format name | Code |
| --- | --- |
| Arc/Info ASCII Grid | AAIGrid |
| ADRG/ARC Digitalized Raster Graphics (.gen/.thf) | ADRG |
| Bathymetric Attributed Grid (.bag) | BAG |
| Magellan BLX Topo (.blx, .xlb) | BLX |
| Microsoft Windows Device Independent Bitmap (.bmp) | BMP |
| VTP Binary Terrain Format (.bt) | BT |
| Military Elevation Data (.dt0, .dt1, .dt2) | DTED |
| ESRI .hdr Labelled | EHdr |
| NASA ELAS | ELAS |
| ENVI .hdr Labelled Raster | ENVI |



---

## 幻灯片 22

GDAL大体结构

GDAL使用抽象数据模型(abstract data model)来解析它所支持的数据格式，抽象数据模型包括：

数据集(dataset)，坐标系统；

仿射地理坐标转换(Affine GeoTransform)；

大地控制点(GCPs)；元数据(Metadata)，；

栅格波段(RasterBand)；

颜色表(ColorTable)；

子数据集域(Subdatasets Domain)，图像结构域(Image_StructureDomain)，XML域(XML:Domains)。


---

## 幻灯片 23

OGR空间参考

OGR是GDAL项目的一个分支，功能与GDAL类似，只不过它提供对矢量数据的支持。

有很多著名的GIS类产品都使用了GDAL/OGR库，包括ESRI的ArgGIS 9.2，Google Earth和跨平台的GRASS GIS系统。

利用GDAL/OGR库，可以使基于Linux的地理空间数据管理系统提供对矢量和栅格文件数据的支持。


---

## 幻灯片 24

空间参考

空间参考：空间数据的骨架

大地水准面-》地球椭球体（长半轴、短半轴、扁率）-》基准面

地图投影（两种）：地球表面任意一点转换到地图平面的理论和方法

地理坐标系（GCS）：基准面+角度测量单位+本初子午线

投影坐标系：地理坐标系+投影方法+线性单位


---

## 幻灯片 25

ORG空间参考

GDAL中使用OGRSpatial Reference来对空间参考信息进行管理

GDAL主持的空间参考格式常用的有：

WKT(默认)、EPSG代码、PROJ.4和ESRI的WKT格式


---

## 幻灯片 26

OGR大体结构

Geometry：类Geometry(包括OGRGeometry等类)封装了OpenGIS的矢量数据模型，并提供了一些几何操作，WKB(Well KnowsBinary)和WKT(Well Known Text)格式之间的相互转换，以及空间参考系统(投影)。

Spatial Reference：类OGRSpatialReference封装了投影和基准面的定义。

Feature：类OGRFeature封装了一个完整feature的定义，一个完整的feature包括一个geometry和geometry的一系列属性。


---

## 幻灯片 27

OGR大体结构

Feature Definition：类OGRFeatureDefn里面封装了feature的属性，类型、名称及其默认的空间参考系统等。一个OGRFeature Defn对象通常与一个层(layer)对应。

Layer：类OGRLayer是一个抽象基类，表示数据源类OGRDataSource里面的一层要素(feature)。 Data Source：类OGRDataSource是一个抽象基类，表示含有OGRLayer对象的一个文件或一个数据库。

Drivers：类OGRSFDriver对应于每一个所支持的矢量文件格式。类OGRSFDriver由类OGRSFDriverRegistrar来注册和管理。


---

## 幻灯片 28

Part 3

QGIS介绍


---

## 幻灯片 29

QGIS介绍

QGIS是一个免费的开源跨平台桌面地理信息系统（GIS）应用程序，它支持查看，编辑和分析地理空间数据。


---

## 幻灯片 30

创建，编辑，管理和导出数据

GPS工具，用于导入和导出GPX格式，以及将其他GPS格式转换为GPX或直接下载/上传到GPS单元

地理定位插件，对图像进行地理编码

使用DB Manager插件从文件创建空间数据库表的能力

矢量数字化工具

能够创建和编辑多种文件格式和GRASS矢量层

改进对空间数据库表的处理

支持可视化和编辑OpenStreetMap数据

用于管理向量属性表的工具

1

3

2

4

6

5

7

8

选择将屏幕截图保存为地理参考图像

DXF导出工具，具有增强的功能，可以导出样式和插件以执行类似CAD的功能

9

10


---

## 幻灯片 31

核心插件


---

## 幻灯片 32

其它工具

ArcGIS

优点：全面强大的GIS功能，10已经推出，ARCGIS从此支持云GIS、时间GIS，同时追求GIS-RS一体化，开发方面，ArcObjects10带来了一些新的功能和更好的体验在提升数据显示性能的同时加强了对3D数据的创建和管理能力，丰富和完善了诸多3D环境下的分析功能，力图使用户感受一个不仅只能Show，更注重强大分析功能的3D GIS，但收费较高。

MapGIS

优秀的国产GIS，有较强的创新能力。可以根据已有数据回溯过去某一时刻的情况或预测将来某一时刻的情况，以满足历史回溯和衍变、地籍变更、环境变化、灾难预警等应用的需要，可随意搭建成适应各专业的影像数据处理平台或GIS与影像相结合的综合处理平台，但插件较多

gVSIG

一个强大的gis，易于使用，可互操作，并被世界各地成千上万的用户使用。可以处理各种格式、矢量和栅格、文件、数据库和远程服务，可以使用各种工具来分析和管理您的地理信息gvSIG desktop设计为易于扩展，允许对定制解决方案的应用程序和开发进行持续改进。


---

## 幻灯片 33

环境搭建

Part 4


---

## 幻灯片 34

GDAL库下载

选择合适的版本下载，建议非必要不要使用高版本，否则需要同时配置PROJ库

解压后如图示


---

## 幻灯片 35

GDAL库编译

修改nmake.opt文件：


---

## 幻灯片 36

GDAL库编译

以管理员身份运行VS X64 本机工具命令提示：


---

## 幻灯片 37

GDAL库编译

在VS X64 本机工具命令提示中依次输入cd D:\gdal

d:

nmake /f makefile.vc

nmake /f makefile.vc install

nmake /f makefile.vc devinstall

编译会花费一段时间


---

## 幻灯片 38

GDAL库编译

编译完成后生成如下几个文件：


---

## 幻灯片 39

头文件配置

在新建的工程中右击->属性->配置属性->c/c++->常规，在右侧找到“附加包含目录”，然后将include文件夹的路径填写完整，然后点击应用


---

## 幻灯片 40

静态库路径配置

配置属性->链接器->常规，在右侧的“附加库目录”中将GDAL的lib文件夹的路径填写完整，然后点击应用


---

## 幻灯片 41

lib文件的添加

配置属性->链接器->输入，在右侧的“附加依赖项”中将编译出来的gdal_i.lib文件添加进去，然后点击应用


---

## 幻灯片 42

dll文件的添加

将dll文件(gdal110.dll)添加到项目的Debug目录下，项目就能运行了


---

## 幻灯片 43

GDAL官网：

https://gdal.org/

GDAL开发文档（中文整理）

https://www.xuebuyuan.com/3221812.html#title-0

《GDAL源码剖析与开发指南》 [李民录]（前三章）

学习资料


---

## 幻灯片 44

谢谢各位！
